<!--
    GitHub Pagesì— ë°°í¬í•˜ê¸° ìœ„í•œ index.html íŒŒì¼ì…ë‹ˆë‹¤.
    ê°€ì„ ëŠë‚Œì´ ë‚˜ëŠ” ë”°ëœ»í•œ ì˜ë¡œìš° í†¤ì˜ ìƒ‰ìƒ íŒ”ë ˆíŠ¸ê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.
-->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìƒì„±í˜• AI ì—ì´ì „íŠ¸ ì—°ìˆ˜ê³¼ì • í•™ìŠµ ì‹œìŠ¤í…œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /*
            Tailwind CSSë¥¼ ì‚¬ìš©í•˜ì—¬ ìŠ¤íƒ€ì¼ë§ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.
            ê°€ì„ ëŠë‚Œì´ ë‚˜ëŠ” ë”°ëœ»í•œ ì˜ë¡œìš° ê³„ì—´ì˜ ìƒ‰ìƒ íŒ”ë ˆíŠ¸ë¥¼ ì •ì˜í–ˆìŠµë‹ˆë‹¤.
        */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        /* ê°€ì„ ì˜ë¡œìš° ê³„ì—´ ìƒ‰ìƒ íŒ”ë ˆíŠ¸ */
        .pastel-bg-light { background-color: #fcfbeb; }
        .pastel-bg { background-color: #f7e6a7; }
        .pastel-accent { background-color: #f0c419; }
        .pastel-accent-hover { background-color: #e6b90f; }
        .text-yellow-800 { color: #8a6c0e; }
        .bg-yellow-50 { background-color: #fcfbeb; }
        .bg-yellow-500 { background-color: #f0c419; }
        .bg-yellow-400 { background-color: #f4d048; }
        .bg-yellow-600 { background-color: #e6b90f; }
        .border-yellow-200 { border-color: #f8e9a6; }
        .text-red-600 { color: #e53e3e; }
        .text-green-600 { color: #38a169; }

        /* ë¡œë”© ìŠ¤í”¼ë„ˆ ì• ë‹ˆë©”ì´ì…˜ */
        .spinner {
            border-top-color: #e6b90f;
            -webkit-animation: spin 1s infinite linear;
            animation: spin 1s infinite linear;
        }
        @-webkit-keyframes spin {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ê°€ë…ì„± í–¥ìƒ ìŠ¤íƒ€ì¼ */
        #content-text, #quiz-container {
            font-size: 1.125rem; /* text-lg */
            line-height: 1.8; /* Increased line-height for better spacing */
        }
    </style>
</head>
<body class="bg-yellow-50 text-gray-800 antialiased min-h-screen flex flex-col">
    <header class="bg-yellow-500 text-white p-8 text-center shadow-lg">
        <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold">ìƒì„±í˜• AI ì—ì´ì „íŠ¸ ì—°ìˆ˜ê³¼ì • í•™ìŠµ ì‹œìŠ¤í…œ</h1>
        <p class="mt-2 text-md sm:text-lg">ì—°ìˆ˜ ê³„íšì„œ ê¸°ë°˜ì˜ í•„ìˆ˜ í•™ìŠµ ë‚´ìš©ì„ ë¯¸ë¦¬ ì•Œì•„ë³´ê³  ì¤€ë¹„í•˜ì„¸ìš”.</p>
    </header>

    <main class="flex-grow p-4 md:p-8 max-w-7xl mx-auto w-full">
        <!-- í•™ìŠµ ëª¨ë“ˆ ì¹´ë“œ ì„¹ì…˜ -->
        <section id="module-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- JavaScriptê°€ ì—¬ê¸°ì— í•™ìŠµ ëª¨ë“ˆ ì¹´ë“œë¥¼ ë™ì ìœ¼ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤. -->
        </section>

        <!-- í•™ìŠµ ë‚´ìš© í‘œì‹œ ì„¹ì…˜ -->
        <section id="content-display" class="hidden bg-white rounded-xl shadow-lg p-6 sm:p-8 md:p-10 transition-all duration-300 ease-in-out">
            <button id="back-btn" class="mb-6 flex items-center text-yellow-600 font-medium">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                ë’¤ë¡œê°€ê¸°
            </button>
            <h2 id="content-title" class="text-2xl sm:text-3xl font-bold text-yellow-800 mb-4"></h2>
            <div id="content-text" class="prose max-w-none text-gray-700 mb-8">
                <!-- ë™ì ìœ¼ë¡œ ìƒì„±ëœ í•™ìŠµ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤. -->
            </div>

            <!-- í•™ìŠµ í™•ì¸ ë¬¸ì œ ì„¹ì…˜ -->
            <div id="quiz-section" class="mt-8 pt-8 border-t-2 border-gray-200">
                <h3 class="text-xl font-bold text-yellow-800 mb-4">í•™ìŠµ í™•ì¸ ë¬¸ì œ</h3>
                <button id="generate-quiz-btn" class="bg-yellow-400 text-white font-medium py-3 px-6 rounded-lg shadow-md hover:bg-yellow-500 transition-colors">ë¬¸ì œ ìƒì„±í•˜ê¸°</button>
                
                <div id="quiz-container" class="mt-6 p-6 rounded-lg bg-yellow-50 border border-yellow-200 hidden">
                    <!-- ë¬¸ì œê°€ ë™ì ìœ¼ë¡œ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤. -->
                </div>

                <!-- ë¡œë”© ì¸ë””ì¼€ì´í„° (í€´ì¦ˆìš©) -->
                <div id="quiz-loading-indicator" class="flex flex-col items-center justify-center p-8 hidden">
                    <div class="spinner h-12 w-12 border-4 border-gray-300 rounded-full"></div>
                    <p class="mt-4 text-gray-600 font-medium">ë¬¸ì œë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
                </div>
                
                <div id="quiz-error-message" class="text-red-500 text-center mt-4 hidden">
                    <p>ì£„ì†¡í•©ë‹ˆë‹¤. ë¬¸ì œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>
                </div>
            </div>

            <!-- ë¡œë”© ì¸ë””ì¼€ì´í„° (í•™ìŠµ ë‚´ìš©ìš©) -->
            <div id="loading-indicator" class="flex flex-col items-center justify-center p-8 hidden">
                <div class="spinner h-12 w-12 border-4 border-gray-300 rounded-full"></div>
                <p class="mt-4 text-gray-600 font-medium">ë‚´ìš©ì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
            </div>
            <!-- API ì˜¤ë¥˜ ë©”ì‹œì§€ (í•™ìŠµ ë‚´ìš©ìš©) -->
            <div id="error-message" class="text-red-500 text-center mt-4 hidden">
                <p>ì£„ì†¡í•©ë‹ˆë‹¤. ë‚´ìš©ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>
            </div>
        </section>
    </main>

    <script>
        //
        // í´ë¼ì´ì–¸íŠ¸ ì¸¡ JavaScript: Gemini APIë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ë„ë¡ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.
        // ì´ ì½”ë“œëŠ” ë¡œì»¬ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸í•˜ê¸° ìš©ì´í•˜ë„ë¡ ì‘ì„±ë˜ì—ˆìœ¼ë©°, Apps Script í™˜ê²½ì—ì„œëŠ”
        // Google Apps Scriptì˜ ì„œë²„ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë‹¤ì‹œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.
        //
        document.addEventListener('DOMContentLoaded', () => {
            const moduleContainer = document.getElementById('module-container');
            const contentDisplay = document.getElementById('content-display');
            const contentTitle = document.getElementById('content-title');
            const contentText = document.getElementById('content-text');
            const loadingIndicator = document.getElementById('loading-indicator');
            const errorMessage = document.getElementById('error-message');
            const backBtn = document.getElementById('back-btn');
            const generateQuizBtn = document.getElementById('generate-quiz-btn');
            const quizContainer = document.getElementById('quiz-container');
            const quizLoadingIndicator = document.getElementById('quiz-loading-indicator');
            const quizErrorMessage = document.getElementById('quiz-error-message');

            let currentQuizData = null; // í˜„ì¬ ë¬¸ì œë¥¼ ì €ì¥í•  ë³€ìˆ˜

            const modules = [
                {
                    title: "ê¸°ì´ˆ í”„ë¡œê·¸ë˜ë° (Python)",
                    description: "Pythonì˜ ê¸°ë³¸ ë¬¸ë²•, ë³€ìˆ˜, ìë£Œí˜•, í•¨ìˆ˜, ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°(OOP) ê°œë…ì„ í•™ìŠµí•©ë‹ˆë‹¤.",
                    url: "https://www.w3schools.com/python/default.asp",
                    isInternal: false
                },
                {
                    title: "ë¨¸ì‹ ëŸ¬ë‹ ê¸°ì´ˆ",
                    description: "ì§€ë„/ë¹„ì§€ë„ í•™ìŠµ, ëª¨ë¸ì˜ í•™ìŠµ ë° í‰ê°€ ê³¼ì •, ì£¼ìš” ì•Œê³ ë¦¬ì¦˜ì˜ ê¸°ë³¸ ì›ë¦¬ë¥¼ ì´í•´í•©ë‹ˆë‹¤.",
                    url: "https://developers.google.com/machine-learning/crash-course?hl=ko",
                    isInternal: false
                },
                {
                    title: "ìì—°ì–´ ì²˜ë¦¬(NLP) ê°œë…",
                    description: "í…ìŠ¤íŠ¸ ë°ì´í„°ì˜ ì „ì²˜ë¦¬, í† í°í™”, ë‹¨ì–´ ì„ë² ë”©, ê·¸ë¦¬ê³  Transformer ì•„í‚¤í…ì²˜ì˜ ê¸°ë³¸ ì›ë¦¬ë¥¼ ì•Œì•„ë´…ë‹ˆë‹¤.",
                    url: "https://huggingface.co/learn/nlp-course/ko/chapter1/1",
                    isInternal: false
                },
                {
                    title: "CAFA í”Œë«í¼ ë° ì—ì´ì „íŠ¸ ê°œë…",
                    description: "CAFA í”Œë«í¼ì˜ ë¡œìš°ì½”ë“œ í™˜ê²½ê³¼ ì˜¨í†¨ë¡œì§€ ëª¨ë¸ ì¤‘ì‹¬ ìƒì„±(OMG) ë°©ì‹ì˜ ê°œë…ì„ ì´í•´í•©ë‹ˆë‹¤.",
                    url: "#",
                    isInternal: true,
                    prompt: "CAFA í”Œë«í¼ì˜ ë¡œìš°ì½”ë“œ í™˜ê²½ê³¼ ì˜¨í†¨ë¡œì§€ ëª¨ë¸ ì¤‘ì‹¬ ìƒì„±(OMG) ë°©ì‹ì˜ ê°œë…ì— ëŒ€í•´ ì—°ìˆ˜ ê³„íšì„œ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ìì„¸íˆ ì„¤ëª…í•´ì¤˜. ì£¼ìš” íŠ¹ì§•ê³¼ ëª©ì ì„ í¬í•¨í•´ì¤˜."
                },
                {
                    title: "ë‹¨ì¼ í„´/ë³µìˆ˜ í„´ ì—ì´ì „íŠ¸",
                    description: "ë‹¨ì¼ ìƒí˜¸ì‘ìš© ë° ë³µì¡í•œ ëŒ€í™” íë¦„ì„ ì²˜ë¦¬í•˜ëŠ” ì—ì´ì „íŠ¸ ê°œë°œ ì‹¤ìŠµ ë‚´ìš©ì„ ë¯¸ë¦¬ ì‚´í´ë´…ë‹ˆë‹¤.",
                    url: "#",
                    isInternal: true,
                    prompt: "ë‹¨ì¼ í„´(Single-Turn) ì—ì´ì „íŠ¸ì™€ ë³µìˆ˜ í„´(Multi-Turn) ì—ì´ì „íŠ¸ì˜ ê°œë…ê³¼ ì°¨ì´ì ì„ ì—°ìˆ˜ ê³„íšì„œì˜ ì‹¤ìŠµ ì˜ˆì‹œë¥¼ ì°¸ê³ í•˜ì—¬ ì„¤ëª…í•´ì¤˜. 'ì—ì´ì „íŠ¸ ë‚´ ì§‘ë‹¨ AI'ì˜ ì˜ë¯¸ë„ í¬í•¨í•´ì¤˜."
                },
                {
                    title: "ë°˜ë³µë¬¸ í™œìš© ì—ì´ì „íŠ¸",
                    description: "íŠ¹ì • ì¡°ê±´ì´ ì¶©ì¡±ë  ë•Œê¹Œì§€ í„´ì„ ë°˜ë³µí•˜ëŠ” ë™ì ì¸ ìƒí˜¸ì‘ìš© ì—ì´ì „íŠ¸ì˜ ì›ë¦¬ë¥¼ ì•Œì•„ë´…ë‹ˆë‹¤.",
                    url: "#",
                    isInternal: true,
                    prompt: "ì—°ìˆ˜ ê³„íšì„œì— ë‚˜ì˜¨ ë°˜ë³µë¬¸(Looping Mechanism) í™œìš© ì—ì´ì „íŠ¸ì˜ ê°œë…ê³¼ ì‹¤ìŠµ ì˜ˆì‹œ(ì ì‘í˜• ë¬¸ì œ ìƒì„±ê¸°, ë£¨ë¸Œë¦­ ìƒì„±ê¸°)ì— ëŒ€í•´ ìì„¸íˆ ì„¤ëª…í•´ì¤˜. ë°˜ë³µë¬¸ì´ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì„¤ëª…í•´ì¤˜."
                },
                {
                    title: "OMG (ì˜¨í†¨ë¡œì§€ ëª¨ë¸)",
                    description: "ì˜¨í†¨ë¡œì§€ ëª¨ë¸ì„ í™œìš©í•˜ì—¬ ì§€ì‹ ê¸°ë°˜ì˜ ì •í™•í•˜ê³  ì„¤ëª… ê°€ëŠ¥í•œ ì½˜í…ì¸ ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì„ íŒŒì•…í•©ë‹ˆë‹¤.",
                    url: "#",
                    isInternal: true,
                    prompt: "OMG(Ontology Model-centered Generation)ì˜ ê°œë…ê³¼ ì´ì ì„ ì—°ìˆ˜ ê³„íšì„œ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì„¤ëª…í•´ì¤˜. ì˜¨í†¨ë¡œì§€ ëª¨ë¸ì˜ ì •ì˜, êµ¬ì¡°ì  ìœ í˜•, ê·¸ë¦¬ê³  ê¸°ì¡´ ë°©ì‹(LOG, RAG)ê³¼ì˜ ì°¨ì´ì ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ëª…í•´ì¤˜."
                },
                {
                    title: "ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì—ì´ì „íŠ¸",
                    description: "ì—¬ëŸ¬ ì—ì´ì „íŠ¸ë¥¼ ì¡°ìœ¨í•˜ì—¬ ë³µí•©ì ì¸ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ê°œì¸ ë§ì¶¤í˜• í•™ìŠµ ê²½ë¡œë¥¼ ì„¤ê³„í•˜ëŠ” ê°œë…ì„ ì´í•´í•©ë‹ˆë‹¤.",
                    url: "#",
                    isInternal: true,
                    prompt: "ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì—ì´ì „íŠ¸ì˜ ê°œë…ê³¼ 'ì—ì´ì „íŠ¸ ê°„ ì§‘ë‹¨ AI'ì˜ ì˜ë¯¸ë¥¼ ì„¤ëª…í•´ì¤˜. ì—°ìˆ˜ ê³„íšì„œì˜ ì‹¤ìŠµ ì˜ˆì‹œ(ê°œì¸ ë§ì¶¤í˜• í•™ìŠµ ê²½ë¡œ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°)ë¥¼ ì°¸ê³ í•˜ì—¬ ì—¬ëŸ¬ ì—ì´ì „íŠ¸ê°€ ì–´ë–»ê²Œ í˜‘ì—…í•˜ëŠ”ì§€ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•´ì¤˜."
                }
            ];
            
            // NOTE: ì´ API í‚¤ëŠ” Apps Script í™˜ê²½ì—ì„œ ë³´ì•ˆìƒ ë¯¼ê°í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ,
            // Apps Script ë°°í¬ ì‹œì—ëŠ” Code.gs íŒŒì¼ì—ë§Œ ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤.
            // ë¡œì»¬ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì„ì‹œë¡œ ì—¬ê¸°ì— í¬í•¨í•©ë‹ˆë‹¤.
            const API_KEY = ""; 

            // API í˜¸ì¶œ í•¨ìˆ˜
            async function fetchGeminiContent(prompt) {
                loadingIndicator.classList.remove('hidden');
                errorMessage.classList.add('hidden');
                contentText.innerHTML = '';
                
                try {
                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                    const payload = { contents: chatHistory };
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${API_KEY}`;
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    if (!response.ok) {
                        throw new Error(`API error: ${response.statusText}`);
                    }
                    
                    const result = await response.json();
                    
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        contentText.innerHTML = marked.parse(text);
                    } else {
                        throw new Error('Invalid API response structure');
                    }
                } catch (error) {
                    console.error("Error fetching content:", error);
                    errorMessage.classList.remove('hidden');
                } finally {
                    loadingIndicator.classList.add('hidden');
                }
            }

            // í€´ì¦ˆ API í˜¸ì¶œ í•¨ìˆ˜
            async function fetchQuizContent(moduleTitle) {
                quizLoadingIndicator.classList.remove('hidden');
                quizContainer.classList.add('hidden');
                quizErrorMessage.classList.add('hidden');

                try {
                    const prompt = `${moduleTitle}ì˜ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ í•™ìŠµ ë‚´ìš©ì„ ì ê²€í•  ìˆ˜ ìˆëŠ” 3~5ê°œì˜ ê°ê´€ì‹ ë¬¸ì œë“¤ì„ ì¶œì œí•˜ê³ , ê° ë¬¸ì œì˜ ì •ë‹µê³¼ í•´ì„¤ì„ í¬í•¨í•˜ì—¬ JSON ë°°ì—´ í˜•ì‹ìœ¼ë¡œ ë°˜í™˜í•´ì¤˜. ì •ë‹µê³¼ í•´ì„¤ì€ ë°˜ë“œì‹œ í•œê¸€ë¡œ ì‘ì„±í•´ì¤˜. JSON ë°°ì—´ì˜ ê° ê°ì²´ëŠ” ë‹¤ìŒê³¼ ê°™ì•„: { "question": "...", "options": ["...", "...", "...", "..."], "answer": "...", "explanation": "..." }`;
                    
                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                    const payload = { 
                        contents: chatHistory,
                        generationConfig: {
                            responseMimeType: "application/json"
                        }
                    };
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${API_KEY}`;
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`API error: ${response.statusText}`);
                    }

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const jsonText = result.candidates[0].content.parts[0].text;
                        currentQuizData = JSON.parse(jsonText);
                        quizContainer.classList.remove('hidden');
                        quizContainer.innerHTML = ''; // ê¸°ì¡´ ë¬¸ì œ ì œê±°

                        currentQuizData.forEach((quiz, index) => {
                            const quizItem = document.createElement('div');
                            quizItem.className = 'quiz-item mb-6 p-4 rounded-lg bg-yellow-50 border border-yellow-200';
                            quizItem.innerHTML = `
                                <p class="font-semibold text-gray-800 mb-2">Q${index + 1}. ${quiz.question}</p>
                                <div class="quiz-options flex flex-col space-y-2 mb-2">
                                    ${quiz.options.map((option, optIndex) => `
                                        <label class="flex items-center text-gray-700 cursor-pointer">
                                            <input type="radio" name="quiz-${index}" value="${option}" class="mr-2">
                                            <span>${option}</span>
                                        </label>
                                    `).join('')}
                                </div>
                                <button class="submit-quiz-btn bg-yellow-600 text-white font-medium py-2 px-4 rounded-lg shadow-md hover:bg-yellow-700 transition-colors mt-2">ì •ë‹µ ì œì¶œ</button>
                                <p class="quiz-feedback mt-2 font-bold text-lg"></p>
                                <button class="show-explanation-btn text-yellow-600 mt-2 hover:underline hidden">í•´ì„¤ ë³´ê¸°</button>
                                <div class="quiz-explanation mt-2 text-gray-600 italic hidden">${quiz.explanation}</div>
                            `;
                            quizContainer.appendChild(quizItem);
                        });

                        // ê° ë¬¸ì œì— ëŒ€í•œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                        quizContainer.querySelectorAll('.quiz-item').forEach((quizItem, index) => {
                            const submitBtn = quizItem.querySelector('.submit-quiz-btn');
                            const feedback = quizItem.querySelector('.quiz-feedback');
                            const showExplanationBtn = quizItem.querySelector('.show-explanation-btn');
                            const explanation = quizItem.querySelector('.quiz-explanation');
                            
                            submitBtn.addEventListener('click', () => {
                                const selectedOption = quizItem.querySelector(`input[name="quiz-${index}"]:checked`);
                                if (selectedOption) {
                                    if (selectedOption.value === currentQuizData[index].answer) {
                                        feedback.textContent = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰";
                                        feedback.className = "mt-2 font-bold text-lg text-green-600";
                                    } else {
                                        feedback.textContent = "ì˜¤ë‹µì…ë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.";
                                        feedback.className = "mt-2 font-bold text-lg text-red-600";
                                    }
                                    submitBtn.classList.add('hidden');
                                    showExplanationBtn.classList.remove('hidden');
                                } else {
                                    feedback.textContent = "ì„ íƒì§€ë¥¼ ê³¨ë¼ì£¼ì„¸ìš”.";
                                    feedback.className = "mt-2 font-bold text-lg text-yellow-600";
                                }
                            });
                            
                            showExplanationBtn.addEventListener('click', () => {
                                explanation.classList.toggle('hidden');
                            });
                        });
                    } else {
                        throw new Error('Invalid API response structure');
                    }
                } catch (error) {
                    console.error("Error fetching quiz content:", error);
                    quizErrorMessage.classList.remove('hidden');
                } finally {
                    quizLoadingIndicator.classList.add('hidden');
                }
            }


            // ëª¨ë“ˆ ì¹´ë“œ ë™ì  ìƒì„±
            modules.forEach(module => {
                const card = document.createElement('div');
                card.className = 'module-card bg-white rounded-xl shadow-md p-6 flex flex-col justify-between transform transition-transform hover:scale-105';
                card.innerHTML = `
                    <h2 class="text-xl font-semibold text-yellow-800 mb-2">${module.title}</h2>
                    <p class="flex-grow text-gray-600 mb-4">${module.description}</p>
                    <a href="${module.url}" target="${module.isInternal ? '_self' : '_blank'}" class="learn-btn bg-yellow-400 text-white font-medium py-3 px-6 rounded-lg text-center shadow-md hover:bg-yellow-500 transition-colors">${module.isInternal ? 'ë‚´ìš© ë³´ê¸°' : 'í•™ìŠµí•˜ê¸°'}</a>
                `;
                moduleContainer.appendChild(card);
            });

            // ì´ë²¤íŠ¸ ìœ„ì„ì„ ì‚¬ìš©í•˜ì—¬ 'ë‚´ìš© ë³´ê¸°' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
            moduleContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('learn-btn')) {
                    e.preventDefault();
                    const moduleIndex = Array.from(moduleContainer.children).findIndex(child => child.contains(e.target));
                    const module = modules[moduleIndex];

                    if (module.isInternal) {
                        moduleContainer.classList.add('hidden');
                        contentDisplay.classList.remove('hidden');
                        contentTitle.textContent = module.title;
                        
                        // Apps Script í™˜ê²½ì´ ì•„ë‹ ê²½ìš°, ë¡œì»¬ API í˜¸ì¶œ
                        // Apps Script í™˜ê²½ì´ë¼ë©´ google.script.runì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
                        fetchGeminiContent(module.prompt);
                    } else {
                        window.open(module.url, '_blank');
                    }
                }
            });

            // 'ë¬¸ì œ ìƒì„±í•˜ê¸°' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
            generateQuizBtn.addEventListener('click', () => {
                const currentTitle = contentTitle.textContent;
                const module = modules.find(m => m.title === currentTitle);
                
                if (module) {
                     // Apps Script í™˜ê²½ì´ ì•„ë‹ ê²½ìš°, ë¡œì»¬ API í˜¸ì¶œ
                    // Apps Script í™˜ê²½ì´ë¼ë©´ google.script.runì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
                    fetchQuizContent(module.title);
                }
            });

            // ë’¤ë¡œê°€ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
            backBtn.addEventListener('click', () => {
                contentDisplay.classList.add('hidden');
                moduleContainer.classList.remove('hidden');
                contentText.innerHTML = '';
                quizContainer.classList.add('hidden');
                generateQuizBtn.classList.remove('hidden');
            });

            // marked ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ (ë§ˆí¬ë‹¤ìš´ ë Œë”ë§ì„ ìœ„í•´)
            const script = document.createElement('script');
            script.src = "https://cdn.jsdelivr.net/npm/marked/marked.min.js";
            document.head.appendChild(script);
        });
    </script>
</body>
</html>

